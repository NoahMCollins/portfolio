<div ng-include="'assets/views/partials/header.html'"></div>
<div>
  <div ng-include="'assets/views/partials/messages.html'"></div>

  <h2>
    <span ng-bind="'Alarm: ' + ctrl.alarm.alarmName"></span>
    <div class="btn-group btn-group-sm pull-right">
      <button class="btn btn-default"
              ng-click="ctrl.goBack()">
        Back to Alarms
      </button>
      <button class="btn btn-default"
              ng-click="ctrl.editing = !ctrl.editing">
        <span ng-bind="ctrl.editing ? 'Done Editing' : 'Edit Mode'"></span>
      </button>
      <button class="btn btn-default"
              ng-click="ctrl.addCriteria()">
        Add Criteria Item
      </button>
    </div>
  </h2>

  <table class="table table-hover">
    <tr>
      <th ng-show="ctrl.editing"></th>
      <th>Instrument</th>
      <th>Field</th>
      <th>Trigger</th>
      <th>Threshold</th>
      <th ng-show="ctrl.editing"></th>
    </tr>
    <tr ng-repeat="criteria in ctrl.list"
        ng-click="ctrl.editing ? null : ctrl.editCriteria(criteria.ID)">
      <td ng-show="ctrl.editing">
        <button type="button"
                class="btn btn-danger btn-xs"
                ng-click="ctrl.deleteCriteria(criteria.ID)">
          <i  class="glyphicon glyphicon-remove"></i>
        </button>
      </td>
      <td ng-bind="criteria.instrumentName"></td>
      <td ng-bind="criteria.fieldName"></td>
      <td ng-bind="criteria.alarmTrigger"></td>
      <td ng-bind="criteria.value"></td>
      <td ng-show="ctrl.editing">
        <button type="button"
                class="btn btn-default btn-xs"
                ng-click="ctrl.editCriteria(criteria.ID)">
          <i  class="glyphicon glyphicon-pencil"></i>
        </button>
      </td>
    </tr>
    <tr></tr>
  </table>
</div>